## UNO Activity — MVP План

### Мета
Створити Discord Activity (Embedded App), що дозволяє 2+ гравцям грати у спрощене UNO з числовими картами 4 кольорів, по черзі, без бонус‑карт.

### Джерела
- Discord Quick Start — Getting Started: https://discord.com/developers/docs/quick-start/getting-started
- Discord Docs — Intro: https://discord.com/developers/docs/intro

### Архітектура
- Клієнт (Embedded App SDK): інтерфейс столу, підключення до бекенду, отримання контексту Activity (користувач, канал/гільдія).
- Бекенд (WebSocket, авторитетний сервер): кімнати-матчі, правила колоди/ходу, приховані руки, синхронізація стану, снапшот при реконекті.
- Зберігання: in‑memory (MVP), без персистентності. Опційно — сидований shuffle.

### Обсяг MVP (Ruleset)
- Гравці: 2–6 у матчі (ціль — 2+).
- Колода: лише цифри 0–9 чотирьох кольорів; для кожного кольору 1×0 та 2×(1–9).
- Роздача: 7 карт кожному. Перша карта у відбої має бути числова.
- Хід: дозволено покласти карту, що збігається за кольором або числом з верхньою у відбої.
- Якщо немає ходу: тягнеш 1 карту; якщо зіграбельна — можна одразу зіграти; інакше — пас.
- Перемога: рука порожня → кінець матчу.

### Потік сесії
1. Хост створює матч (кімнату) в Activity у голосовому каналі.
2. Гравці приєднуються, позначають готовність, старт.
3. Сервер роздає, визначає порядок ходу, валідуює дії.
4. Події у реальному часі: play/draw/pass; бродкаст снапшотів і дифів стану.
5. Реконект/пізнє підключення: сервер віддає актуальний снапшот із прихованими картами інших.

### Безпека й чесність
- Авторитетний сервер: валідація ходів, генерація та тасування колоди.
- Приховані руки: клієнти отримують лише дозволену інформацію.
- Сидований shuffle (репрод’юсибельність); таймаути ходу (опціонально для MVP).

### Технічні задачі (високий рівень)
1. Увімкнути Embedded App і налаштувати allowed origins у Discord Portal.
2. Скелет клієнта Activity (React/Vite) з Embedded App SDK.
3. Бекенд Node.js (Express/Fastify) з WebSocket‑кімнатами.
4. Правила UNO (numeric): колода, роздача, валідація ходу, перемога.
5. Життєвий цикл гри: create/join/start/end.
6. Події real‑time: play/draw/pass, state snapshot/patch.
7. UI: лобі й стіл (рука гравця, верхня карта, індикатор ходу).
8. Activity launch flow: отримання контексту, ідентифікація користувачів.
9. Реконект і late‑join: синхронізація стану.
10. Локальна розробка: .env, ngrok, npm scripts.
11. Мінімальні тести правил і черги ходу.
12. Інструкції з деплою (мінімальні).

### Прийнятні спрощення для MVP
- Лише числові карти; жодних спецкарт.
- In‑memory стан без персистентності між рестартами.
- Відсутність матчмейкінгу; ручне створення/приєднання через Activity.

### Відкриті параметри (узгоджено «ОК»)
- 2–6 гравців, стартова рука 7, «draw 1 і можна одразу зіграти», Activity з голосового каналу, без БД у MVP.


